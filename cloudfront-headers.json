{
  "comment": "Security and Performance Headers for AdultNa Static Site",
  "headers": {
    "all_files": {
      "X-DNS-Prefetch-Control": "on",
      "Strict-Transport-Security": "max-age=63072000; includeSubDomains; preload",
      "X-Content-Type-Options": "nosniff",
      "X-Frame-Options": "SAMEORIGIN",
      "Referrer-Policy": "strict-origin-when-cross-origin",
      "Permissions-Policy": "camera=(), microphone=(), geolocation=()",
      "Cross-Origin-Opener-Policy": "same-origin-allow-popups",
      "Cross-Origin-Embedder-Policy": "unsafe-none",
      "Content-Security-Policy": "default-src 'self'; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://*.awswaf.com https://jsearch.p.rapidapi.com https://fonts.googleapis.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' data: https://fonts.gstatic.com; img-src 'self' data: blob: https:; connect-src 'self' https://*.awswaf.com https://jsearch.p.rapidapi.com https://*.execute-api.ap-southeast-1.amazonaws.com; frame-ancestors 'self'"
    },
    "static_assets": {
      "path_pattern": "/_next/static/*",
      "Cache-Control": "public, max-age=31536000, immutable"
    },
    "html_files": {
      "path_pattern": "*.html",
      "Cache-Control": "public, max-age=0, must-revalidate"
    },
    "jobs_page": {
      "path_pattern": "/jobs/*",
      "Cache-Control": "public, max-age=300, stale-while-revalidate=600"
    }
  },
  "cloudfront_function": "// CloudFront Function to add security headers\nfunction handler(event) {\n    var response = event.response;\n    var headers = response.headers;\n    \n    // Security headers\n    headers['strict-transport-security'] = { value: 'max-age=63072000; includeSubDomains; preload' };\n    headers['x-content-type-options'] = { value: 'nosniff' };\n    headers['x-frame-options'] = { value: 'SAMEORIGIN' };\n    headers['referrer-policy'] = { value: 'strict-origin-when-cross-origin' };\n    headers['permissions-policy'] = { value: 'camera=(), microphone=(), geolocation=()' };\n    headers['cross-origin-opener-policy'] = { value: 'same-origin-allow-popups' };\n    headers['cross-origin-embedder-policy'] = { value: 'unsafe-none' };\n    headers['content-security-policy'] = { value: \"default-src 'self'; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://*.awswaf.com https://jsearch.p.rapidapi.com https://fonts.googleapis.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' data: https://fonts.gstatic.com; img-src 'self' data: blob: https:; connect-src 'self' https://*.awswaf.com https://jsearch.p.rapidapi.com https://*.execute-api.ap-southeast-1.amazonaws.com; frame-ancestors 'self'\" };\n    \n    return response;\n}",
  "instructions": {
    "step1": "Go to CloudFront console",
    "step2": "Select your distribution",
    "step3": "Go to 'Functions' tab",
    "step4": "Create a new function with the code from 'cloudfront_function' above",
    "step5": "Associate the function with the viewer response event",
    "step6": "For cache behavior, configure:",
    "cache_behaviors": [
      {
        "path": "/_next/static/*",
        "cache_policy": "CachingOptimized (managed policy)",
        "description": "Long-term caching for immutable static assets"
      },
      {
        "path": "/jobs/*",
        "cache_policy": "Custom with TTL 300 seconds",
        "description": "Short caching for job listings"
      },
      {
        "path": "/*",
        "cache_policy": "CachingDisabled for HTML, CachingOptimized for other assets",
        "description": "Default behavior"
      }
    ]
  }
}
